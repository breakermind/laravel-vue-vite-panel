var g=Object.defineProperty;var n=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;var i=(e,s,a)=>s in e?g(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,c=(e,s)=>{for(var a in s||(s={}))h.call(s,a)&&i(e,a,s[a]);if(n)for(var a of n(s))d.call(s,a)&&i(e,a,s[a]);return e};import{e as u,l as p,f as o,r as m,m as _,_ as f,o as l,c as r,w as v,v as w,a as y,F as L,g as $,t as I}from"../js/index.js";const R=u({id:"main",state:()=>{var e;return{user:null,loggedIn:!1,error:!1,message:"",locale:(e=p.locale)!=null?e:"en"}},getters:{isLoggedIn:e=>e.loggedIn},actions:{async isAuthenticated(){var e;try{let s=await o.get("/web/api/logged");console.log("isAuthenticated OK"),this.loggedIn=!0,this.user=s.data.user,this.message=error.response.data.message,this.error=!1}catch(s){console.log("isAuthenticated ERROR"),this.loggedIn=!1,this.user=null,this.message=(e=s.response.data.message)!=null?e:"Only authenticated users",this.error=!0}},async loginUser(e){try{let s=await o.post("/web/api/login",e);console.log("Login OK"),this.error=!1,this.message=s.data.message,this.user=s.data.user,this.loggedIn=!0,m.push("/panel")}catch(s){console.log("Login ERROR"),this.error=!0,this.message=s.response.data.message,this.user=null,this.loggedIn=!1}},async changeLocale(e){try{let s=await o.get("/web/api/locale/"+e);this.locale=e}catch(s){console.log("Error locale",s)}},scrollTop(){window.scrollTo({top:0,behavior:"smooth"})}}});const b={data(){return{}},methods:c({},_(R,["changeLocale"])),watch:{"$i18n.locale":function(e,s){console.log("New locale",s,e,this.$i18n.locale),this.changeLocale(e)}}},O={class:"locale-changer"},A=["value"];function E(e,s,a,S,k,B){return l(),r("div",O,[v(y("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>e.$i18n.locale=t),class:"locale-changer-select"},[(l(!0),r(L,null,$(e.$i18n.availableLocales,t=>(l(),r("option",{key:`locale-${t}`,value:t},I(t),9,A))),128))],512),[[w,e.$i18n.locale]])])}var D=f(b,[["render",E],["__scopeId","data-v-7d7e1c18"]]);export{D as C};
