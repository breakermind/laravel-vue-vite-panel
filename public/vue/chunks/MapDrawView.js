import{L as d}from"./index.esm.js";import{_ as g,T as m,r as u,o as y,c as h,a as f,b as n,t as _,w,v,p as k,d as L}from"../js/index.js";const M={name:"map-view",components:{TopMenu:m},data(){return{api_key:"",map:null,poly:null,polygon:null,lat:24.886,lng:-70.268,scrollwheel:!0,zoom:5,disableDefaultUI:!1,created_polygon:""}},mounted:function(){this.loadMap()},methods:{loadMap(){let o=null;new d({apiKey:this.api_key,version:"weekly",libraries:["drawing","geometry"]}).load().then(()=>{this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:this.lat,lng:this.lng},scrollwheel:this.scrollwheel,zoom:this.zoom,disableDefaultUI:!1}),this.marker=new google.maps.Marker({position:{lat:this.lat,lng:this.lng},map:this.map}),this.polygon=[{lat:25.774,lng:-80.19},{lat:18.466,lng:-66.118},{lat:32.321,lng:-64.757},{lat:25.774,lng:-80.19}],this.poly=new google.maps.Polygon({paths:this.polygon,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}),this.poly.setMap(this.map);const i=(e,t)=>{e?(alert("Wooow"),console.log("Contain location",t.latLng)):(alert("Pooow"),console.log("Dont contain location",t.latLng))};google.maps.event.addListener(this.map,"click",e=>{const t=!!google.maps.geometry.poly.containsLocation(e.latLng,this.poly);i(t,e)}),google.maps.event.addListener(this.poly,"click",e=>{const t=!!google.maps.geometry.poly.containsLocation(e.latLng,this.poly);i(t,e)}),o=new google.maps.Data({map:this.map}),o.setControls(["Polygon"]),o.setDrawingMode("Polygon"),o.setStyle({editable:!0,draggable:!0,strokeColor:"#12bc00",fillColor:"#12bc00",strokeOpacity:.7,strokeWeight:2,fillOpacity:.5,zIndex:0}),o.addListener("addfeature",function(e){l(e),o.forEach(t=>{t!=e.feature&&o.remove(t)})}),o.addListener("dragend",function(e){l(e)}),o.addListener("setgeometry",function(e){l(e)}),o.addListener("rightclick",function(e){o.remove(e.feature)});function l(e){let t={type:"Polygon",coordinates:[]},r=e.feature.getGeometry(),a=[];r.forEachLatLng(p=>{a.push([p.lng(),p.lat()]),console.log("Point",p)}),a.push(a[0]),t.coordinates.push(a);let c=document.getElementById("poly");c?c.value=JSON.stringify(t):console.log('Add <input id="poly" name="poly"> for polygon')}})}}},b=o=>(k("data-v-2b65930f"),o=o(),L(),o),D={class:"content"},I=b(()=>n("div",{id:"map"},null,-1));function C(o,s,i,l,e,t){const r=u("TopMenu");return y(),h("main",null,[f(r),n("div",D,[n("h1",null,_(o.$t("page.Map")),1),I,w(n("textarea",{id:"poly","onUpdate:modelValue":s[0]||(s[0]=a=>e.created_polygon=a)},null,512),[[v,e.created_polygon]])])])}var S=g(M,[["render",C],["__scopeId","data-v-2b65930f"]]);export{S as default};
